import{a as w,V as t,b as m,c as h,d as p,e as E}from"./VTextField-1d0d3849.js";import{_ as V,r as v,o as l,d as u,e as o,t as g,a as e,w as s,c as f,F as y,f as c,g as x,h as k,i as B}from"./index-a268a96b.js";const b={name:"login",data(){return{email:"",password:"",authorization_token:"",logging:!1,loginform:!0,loginsucess:!1,login_error_message:"",emailErrors:[],passwordErrors:[],temp:"not logged"}},computed:{isFormValid(){return this.emailErrors.length===0&&this.passwordErrors.length===0}},methods:{validateEmail(){this.emailErrors=[],this.email?/.+@.+\..+/.test(this.email)||this.emailErrors.push("Please enter a valid email."):this.emailErrors.push("E-mail is required.")},validatePassword(){this.passwordErrors=[],this.password?this.password.length<6&&this.passwordErrors.push("Password must be at least 6 characters long."):this.passwordErrors.push("Password is required.")},submit(){this.validateEmail(),this.validatePassword(),this.isFormValid?(this.logging=!0,w.post("https://sea-turtle-app-2-m3wfm.ondigitalocean.app/login",{user:{email:this.email,password:this.password}}).then(r=>{this.authorization_token=r.headers.authorization,this.$store.state.authToken=r.headers.authorization,this.$store.state.currentUser=r.data.current_user,this.loginform=!1,this.loginsucess=!0}).catch(r=>{this.login_error_message="Login not successful: "+r.message}).finally(()=>{this.logging=!1})):console.log("Form is invalid.")},clear(){this.email="",this.password="",this.emailErrors=[],this.passwordErrors=[]}}},P={key:0},C=c("div",null,null,-1),F={key:0},T={key:1},U={key:1};function z(r,i,S,q,a,d){const _=v("v-flex");return l(),u(y,null,[o(" - teste do user: "+g(r.$store.state.currentUser)+" - teste do user: "+g(r.$store.state.authToken)+" ",1),r.$store.state.currentUser==="not logged"?(l(),u("div",P,[C,a.logging?(l(),u("div",F,[e(_,null,{default:s(()=>[e(t,{class:"d-flex align-center justify-center",height:"400px"},{default:s(()=>[e(x,{size:50,indeterminate:"",color:"primary"})]),_:1})]),_:1})])):(l(),u("div",T,[a.loginform?(l(),f(t,{key:0,class:"pa-8",outlined:"",tile:""},{default:s(()=>[e(t,{class:"pa-md-8 mx-auto","max-width":"400"},{default:s(()=>[e(m,null,{default:s(()=>[o("Seller Bot - Login ")]),_:1}),e(h,null,{default:s(()=>[c("form",{onSubmit:i[2]||(i[2]=B((...n)=>d.submit&&d.submit(...n),["prevent"]))},[e(p,{color:"primary",modelValue:a.email,"onUpdate:modelValue":i[0]||(i[0]=n=>a.email=n),"error-messages":a.emailErrors,label:"E-mail",required:"",onBlur:d.validateEmail},null,8,["modelValue","error-messages","onBlur"]),e(p,{modelValue:a.password,"onUpdate:modelValue":i[1]||(i[1]=n=>a.password=n),"error-messages":a.passwordErrors,label:"Password",type:"password",required:"",onBlur:d.validatePassword},null,8,["modelValue","error-messages","onBlur"]),e(E,null,{default:s(()=>[e(k,{color:"primary",class:"mr-4",type:"submit",disabled:!d.isFormValid},{default:s(()=>[o(" Login ")]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1})]),_:1})):(l(),f(t,{key:1,class:"pa-8",outlined:"",tile:""},{default:s(()=>[e(t,{class:"pa-md-8 mx-auto","max-width":"400"},{default:s(()=>[e(m,null,{default:s(()=>[o("Welcome to Seller Bot!")]),_:1}),e(h,null,{default:s(()=>[o(" Increase your sells! ")]),_:1})]),_:1})]),_:1}))]))])):(l(),u("div",U,[e(t,{class:"pa-8",outlined:"",tile:""},{default:s(()=>[e(t,{class:"pa-md-8 mx-auto","max-width":"400"},{default:s(()=>[e(m,null,{default:s(()=>[o("Seller Bot")]),_:1}),e(h,null,{default:s(()=>[o(" Hello "+g(r.$store.state.currentUser)+", you are already logged in! ",1)]),_:1})]),_:1})]),_:1})]))],64)}const j=V(b,[["render",z]]);export{j as default};
